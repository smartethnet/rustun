<div align="center">

<h1>ğŸŒ Rustun</h1>

<h3>åŸºäº Rust çš„ç°ä»£ VPN éš§é“</h3>

<br/>

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Rust](https://img.shields.io/badge/rust-1.70%2B-orange.svg)](https://www.rust-lang.org/)
[![æ„å»ºçŠ¶æ€](https://img.shields.io/github/actions/workflow/status/smartethnet/rustun/rust.yml?branch=main)](https://github.com/smartethnet/rustun/actions)
[![æœ€æ–°ç‰ˆæœ¬](https://img.shields.io/github/v/release/smartethnet/rustun)](https://github.com/smartethnet/rustun/releases)
[![ä¸‹è½½é‡](https://img.shields.io/github/downloads/smartethnet/rustun/total)](https://github.com/smartethnet/rustun/releases)
[![Stars](https://img.shields.io/github/stars/smartethnet/rustun?style=social)](https://github.com/smartethnet/rustun)

[ğŸŒ å®˜ç½‘](https://smartethnet.github.io) Â· [ğŸ“– æ–‡æ¡£](https://smartethnet.github.io) Â· [English](../README.md) Â· [ğŸ› æŠ¥å‘Šé—®é¢˜](https://github.com/smartethnet/rustun/issues) Â· [âœ¨ åŠŸèƒ½å»ºè®®](https://github.com/smartethnet/rustun/issues)

</div>

---

Rust ç¼–å†™çš„é«˜æ€§èƒ½ VPN éš§é“ï¼Œç”¨äºå®ç°è®¾å¤‡äº’è”ï¼Œå¼‚åœ°ç»„ç½‘ã€‚

**çŠ¶æ€ï¼šç–¯ç‹‚å¼€å‘ä¸­** ğŸš§

![æ¶æ„å›¾](./arch.png)

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ”“ **å¼€æºå…è´¹** - MIT è®¸å¯è¯ï¼Œå®Œå…¨å…è´¹é€æ˜
- âš¡ **ç®€æ´é«˜æ•ˆ** - ä¸€è¡Œå‘½ä»¤å¯åŠ¨ï¼š`./client -s SERVER:8080 -i client-001`
- ğŸ¢ **å¤šç§Ÿæˆ·** - åŸºäºé›†ç¾¤çš„éš”ç¦»ï¼Œæ”¯æŒå¤šå›¢é˜Ÿæˆ–å¤šä¸šåŠ¡å•å…ƒ
- ğŸ” **å®‰å…¨åŠ å¯†** - ChaCha20-Poly1305ï¼ˆé»˜è®¤ï¼‰ã€AES-256-GCMã€XOR/Plain å¯é€‰
- ğŸš€ **åŒè·¯å¾„ P2P** - IPv6 ç›´è¿ + STUN æ‰“æ´ï¼Œè‡ªåŠ¨é™çº§åˆ°ä¸­ç»§æ¨¡å¼
- ğŸŒ **æ™ºèƒ½è·¯ç”±** - è‡ªåŠ¨é€‰æ‹©æœ€ä½³è·¯å¾„ï¼šIPv6ï¼ˆæœ€ä½å»¶è¿Ÿï¼‰â†’ STUNï¼ˆNATç©¿é€ï¼‰â†’ ä¸­ç»§
- ğŸŒ **è·¨å¹³å°** - Linuxã€macOSã€Windows é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
  - [å‰ç½®è¦æ±‚](#å‰ç½®è¦æ±‚)
  - [ä¸‹è½½é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶](#ä¸‹è½½é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶)
  - [å®‰è£…](#å®‰è£…)
  - [å¿«é€Ÿæµ‹è¯•](#å¿«é€Ÿæµ‹è¯•)
- [é…ç½®](#é…ç½®)
  - [æœåŠ¡ç«¯é…ç½®](#æœåŠ¡ç«¯é…ç½®)
  - [å®¢æˆ·ç«¯è·¯ç”±é…ç½®](#å®¢æˆ·ç«¯è·¯ç”±é…ç½®)
- [ä½¿ç”¨è¯´æ˜](#ä½¿ç”¨è¯´æ˜)
  - [å¯åŠ¨æœåŠ¡ç«¯](#å¯åŠ¨æœåŠ¡ç«¯)
  - [å¯åŠ¨å®¢æˆ·ç«¯](#å¯åŠ¨å®¢æˆ·ç«¯)
  - [å®¢æˆ·ç«¯å‘½ä»¤è¡Œé€‰é¡¹](#å®¢æˆ·ç«¯å‘½ä»¤è¡Œé€‰é¡¹)
  - [åŠ å¯†é€‰é¡¹](#åŠ å¯†é€‰é¡¹)
  - [P2P ç›´è¿](#p2p-ç›´è¿)
  - [ç¤ºä¾‹ï¼šå¤šç§Ÿæˆ·è®¾ç½®](#ç¤ºä¾‹å¤šç§Ÿæˆ·è®¾ç½®)
- [è·¯çº¿å›¾](#è·¯çº¿å›¾)

## ğŸš€ å¿«é€Ÿå¼€å§‹

> **ğŸ’¡ æç¤ºï¼š** è®¿é—®æˆ‘ä»¬çš„[å®˜ç½‘](https://smartethnet.github.io)æŸ¥çœ‹äº¤äº’å¼æ¼”ç¤ºå’Œå¯è§†åŒ–æŒ‡å—ï¼

### å‰ç½®è¦æ±‚

**æ‰€æœ‰å¹³å°ï¼š**
- TUN/TAP é©±åŠ¨æ”¯æŒ

**Windowsï¼š**
- ä¸‹è½½ [Wintun é©±åŠ¨](https://www.wintun.net/)ï¼ˆTUN è®¾å¤‡å¿…éœ€ï¼‰
- ç®¡ç†å‘˜æƒé™

**Linux/macOSï¼š**
- Root/sudo æƒé™ï¼ˆæˆ–åœ¨ Linux ä¸Šè®¾ç½® capabilitiesï¼‰

### ä¸‹è½½é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶

**ä» [GitHub Releases](https://github.com/smartethnet/rustun/releases/latest) ä¸‹è½½**

å¯ç”¨å¹³å°ï¼š
- **Linux** - x86_64 (glibc/musl), ARM64 (glibc/musl)
- **macOS** - Intel (x86_64), Apple Silicon (ARM64)
- **Windows** - x86_64 (MSVC)

æ¯ä¸ªå‘å¸ƒåŒ…åŒ…å«ï¼š
- `server` - VPN æœåŠ¡ç«¯äºŒè¿›åˆ¶æ–‡ä»¶
- `client` - VPN å®¢æˆ·ç«¯äºŒè¿›åˆ¶æ–‡ä»¶
- `server.toml.example` - é…ç½®ç¤ºä¾‹
- `routes.json.example` - è·¯ç”±ç¤ºä¾‹

### å®‰è£…

**Linux/macOSï¼š**
```bash
# ä¸‹è½½å¹¶è§£å‹ï¼ˆä»¥ Linux x86_64 ä¸ºä¾‹ï¼‰
wget https://github.com/smartethnet/rustun/releases/download/0.0.1/rustun-v0.0.1-x86_64-unknown-linux-gnu.tar.gz
tar xzf rustun-v0.0.1-x86_64-unknown-linux-gnu.tar.gz
cd rustun-v0.0.1-x86_64-unknown-linux-gnu

# æ·»åŠ å¯æ‰§è¡Œæƒé™
chmod +x server client
```

**Windowsï¼š**
```powershell
# 1. ä» releases ä¸‹è½½ rustun-0.0.1-x86_64-pc-windows-msvc.zip
# 2. è§£å‹åˆ°ç›®å½•
# 3. ä» https://www.wintun.net/ ä¸‹è½½ Wintun
# 4. å°† wintun.dll è§£å‹åˆ°ä¸ client.exe ç›¸åŒçš„ç›®å½•
```

### å¿«é€Ÿæµ‹è¯•

**å¯åŠ¨æœåŠ¡ç«¯ï¼š**
```bash
# Linux/macOS
sudo ./server server.toml.example

# Windows (ä»¥ç®¡ç†å‘˜èº«ä»½)
.\server.exe server.toml.example
```

**è¿æ¥å®¢æˆ·ç«¯ï¼š**
```bash
# Linux/macOS
sudo ./client -s SERVER_IP:8080 -i client-001

# Windows (ä»¥ç®¡ç†å‘˜èº«ä»½)
.\client.exe -s SERVER_IP:8080 -i client-001
```

## âš™ï¸ é…ç½®

### æœåŠ¡ç«¯é…ç½®

åˆ›å»º `server.toml`ï¼š

```toml
[server_config]
listen_addr = "0.0.0.0:8080"

[crypto_config]
# ChaCha20-Poly1305ï¼ˆæ¨èï¼‰
chacha20poly1305 = "your-secret-key-here"

# æˆ–ä½¿ç”¨ AES-256-GCM
# aes256 = "your-secret-key-here"

# æˆ– XORï¼ˆè½»é‡çº§ï¼‰
# xor = "rustun"

# æˆ–æ— åŠ å¯†
# crypto_config = plain

[route_config]
routes_file = "./etc/routes.json"
```

### å®¢æˆ·ç«¯è·¯ç”±é…ç½®

åˆ›å»º `routes.json`ï¼š

```json
[
  {
    "cluster": "beijing",
    "identity": "bj-office-gw",
    "private_ip": "10.0.1.1",
    "mask": "255.255.255.0",
    "gateway": "10.0.1.254",
    "ciders": ["192.168.1.0/24", "192.168.2.0/24"]
  },
  {
    "cluster": "beijing",
    "identity": "bj-dev-server",
    "private_ip": "10.0.1.2",
    "mask": "255.255.255.0",
    "gateway": "10.0.1.254",
    "ciders": []
  },
  {
    "cluster": "shanghai",
    "identity": "sh-office-gw",
    "private_ip": "10.0.2.1",
    "mask": "255.255.255.0",
    "gateway": "10.0.2.254",
    "ciders": ["192.168.10.0/24"]
  },
  {
    "cluster": "shanghai",
    "identity": "sh-db-server",
    "private_ip": "10.0.2.2",
    "mask": "255.255.255.0",
    "gateway": "10.0.2.254",
    "ciders": []
  }
]
```

**é…ç½®è¯´æ˜ï¼š**

- `cluster`ï¼šå¤šç§Ÿæˆ·éš”ç¦»çš„é€»è¾‘åˆ†ç»„
- `identity`ï¼šå”¯ä¸€çš„å®¢æˆ·ç«¯æ ‡è¯†ç¬¦
- `private_ip`ï¼šåˆ†é…ç»™å®¢æˆ·ç«¯çš„è™šæ‹Ÿ IP
- `mask`ï¼šVPN ç½‘ç»œçš„å­ç½‘æ©ç 
- `gateway`ï¼šè·¯ç”±çš„ç½‘å…³ IP
- `ciders`ï¼šé€šè¿‡æ­¤å®¢æˆ·ç«¯å¯è®¿é—®çš„ CIDR èŒƒå›´

## ğŸ“– ä½¿ç”¨è¯´æ˜

### å¯åŠ¨æœåŠ¡ç«¯

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®æ–‡ä»¶
./server etc/server.toml

# æœåŠ¡ç«¯å°†ï¼š
# - ç›‘å¬ 0.0.0.0:8080
# - ä½¿ç”¨ ChaCha20-Poly1305 åŠ å¯†
# - ä» routes.json åŠ è½½å®¢æˆ·ç«¯è·¯ç”±
```

### å¯åŠ¨å®¢æˆ·ç«¯

```bash
# åŸºæœ¬ç”¨æ³•ï¼ˆä½¿ç”¨é»˜è®¤ ChaCha20 åŠ å¯†ï¼‰
./client -s SERVER_IP:8080 -i CLIENT_IDENTITY

# ç¤ºä¾‹ï¼šåŒ—äº¬åŠå…¬ç½‘å…³
./client -s 192.168.1.100:8080 -i bj-office-gw

# ç¤ºä¾‹ï¼šä¸Šæµ·æ•°æ®åº“æœåŠ¡å™¨
./client -s 192.168.1.100:8080 -i sh-db-server
```

### å®¢æˆ·ç«¯å‘½ä»¤è¡Œé€‰é¡¹

```bash
./client --help
```

```
Rustun VPN Client

ç”¨æ³•: client [OPTIONS] --server <SERVER> --identity <IDENTITY>

é€‰é¡¹:
  -s, --server <SERVER>
          æœåŠ¡å™¨åœ°å€ (ä¾‹å¦‚, 127.0.0.1:8080)

  -i, --identity <IDENTITY>
          å®¢æˆ·ç«¯æ ‡è¯†/åç§°

  -c, --crypto <CRYPTO>
          åŠ å¯†æ–¹å¼: plain, aes256:<key>, chacha20:<key>, æˆ– xor:<key>
          [é»˜è®¤: chacha20:rustun]

      --enable-p2p
          å¯ç”¨ P2P IPv6 ç›´è¿
          (é»˜è®¤ç¦ç”¨ï¼Œä»…ä½¿ç”¨ä¸­ç»§)

      --keepalive-interval <KEEPALIVE_INTERVAL>
          ä¿æ´»é—´éš”ï¼ˆç§’ï¼‰
          [é»˜è®¤: 10]

      --keepalive-threshold <KEEPALIVE_THRESHOLD>
          ä¿æ´»é˜ˆå€¼ï¼ˆå¤±è´¥å¤šå°‘æ¬¡åé‡è¿ï¼‰
          [é»˜è®¤: 5]

  -h, --help
          æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

  -V, --version
          æ˜¾ç¤ºç‰ˆæœ¬
```

### åŠ å¯†é€‰é¡¹

```bash
# ChaCha20-Poly1305ï¼ˆé»˜è®¤ï¼Œæ¨èï¼‰
./client -s SERVER:8080 -i client-001 -c chacha20:my-secret-key

# AES-256-GCMï¼ˆæ”¯æŒçš„ CPU ä¸Šç¡¬ä»¶åŠ é€Ÿï¼‰
./client -s SERVER:8080 -i client-001 -c aes256:my-secret-key

# XORï¼ˆè½»é‡çº§ï¼Œä»…ç”¨äºæµ‹è¯•ï¼‰
./client -s SERVER:8080 -i client-001 -c xor:test-key

# Plainï¼ˆæ— åŠ å¯†ï¼Œä»…ç”¨äºè°ƒè¯•ï¼‰
./client -s SERVER:8080 -i client-001 -c plain
```

### P2P ç›´è¿

Rustun æ”¯æŒ**åŒè·¯å¾„ P2P ç½‘ç»œ**ï¼Œæä¾›æœ€ä½³æ€§èƒ½å’Œè¿æ¥æ€§ï¼š

#### ğŸŒŸ è¿æ¥æ¨¡å¼

```bash
# å¯ç”¨åŒè·¯å¾„ P2P æ”¯æŒ
./client -s SERVER:8080 -i client-001 --enable-p2p
```

**ä¸‰çº§è¿æ¥ç­–ç•¥ï¼š**

1. **ğŸŒ IPv6 ç›´è¿**ï¼ˆä¸»è·¯å¾„ï¼‰
   - æœ€ä½å»¶è¿Ÿï¼Œæœ€é«˜ååé‡
   - é€‚ç”¨äºåŒæ–¹éƒ½æœ‰å…¨çƒ IPv6 åœ°å€çš„åœºæ™¯
   - UDP ç«¯å£ 51258ï¼ˆå¯é€šè¿‡ `P2P_UDP_PORT` é…ç½®ï¼‰

2. **ğŸ“¡ STUN æ‰“æ´**ï¼ˆå¤‡ç”¨è·¯å¾„ï¼‰
   - IPv4 ç½‘ç»œçš„ NAT ç©¿é€
   - è‡ªåŠ¨å‘ç°å…¬ç½‘ IP/ç«¯å£
   - æ”¯æŒå¤§å¤šæ•° NAT ç±»å‹
   - UDP ç«¯å£ 51259ï¼ˆå¯é€šè¿‡ `P2P_HOLE_PUNCH_PORT` é…ç½®ï¼‰

3. **ğŸ”„ ä¸­ç»§æ¨¡å¼**ï¼ˆå…œåº•ï¼‰
   - é€šè¿‡ä¸­å¿ƒæœåŠ¡å™¨ä¿è¯è¿æ¥
   - P2P å¤±è´¥æ—¶è‡ªåŠ¨é™çº§
   - é€‚ç”¨äºæ‰€æœ‰ç½‘ç»œç¯å¢ƒ

#### âœ¨ æ ¸å¿ƒä¼˜åŠ¿

- **ğŸ¯ æ™ºèƒ½è·¯ç”±**ï¼šè‡ªåŠ¨é€‰æ‹©æœ€ä½³å¯ç”¨è·¯å¾„
  - IPv6 å¯ç”¨ä¸”æ´»è·ƒï¼ˆ< 15ç§’ï¼‰â†’ ä½¿ç”¨ IPv6
  - IPv6 è¿‡æœŸï¼ŒSTUN æ´»è·ƒ â†’ ä½¿ç”¨ STUN
  - ä¸¤è€…éƒ½è¿‡æœŸ â†’ ä½¿ç”¨ä¸­ç»§
- **âš¡ é›¶é…ç½®**ï¼šåœ°å€é€šè¿‡æœåŠ¡å™¨è‡ªåŠ¨äº¤æ¢
- **ğŸ”„ åŠ¨æ€åˆ‡æ¢**ï¼šè·¯å¾„é—´æ— ç¼åˆ‡æ¢
- **ğŸ“Š å®æ—¶ç›‘æ§**ï¼šé€šè¿‡çŠ¶æ€å‘½ä»¤ç›‘æ§è¿æ¥å¥åº·åº¦

#### ğŸ”§ å·¥ä½œåŸç†

```
åˆå§‹è®¾ç½®ï¼š
  å®¢æˆ·ç«¯ A â†--æ¡æ‰‹--â†’ æœåŠ¡å™¨ â†--æ¡æ‰‹--â†’ å®¢æˆ·ç«¯ B
                 â†“
          äº¤æ¢åœ°å€ï¼š
          - IPv6: [2001:db8::1]:51258
          - STUN: 203.0.113.45:51259

æŒç»­é€šä¿¡ï¼š
  1. å°è¯• IPv6:    [2001:db8::1]:51258  â†’ [2001:db8::2]:51258
     â””â”€ å¦‚æœæ´»è·ƒï¼ˆ< 15ç§’ï¼‰â†’ âœ… ä½¿ç”¨ IPv6ï¼ˆæœ€å¿«ï¼‰
     
  2. å°è¯• STUN:    203.0.113.45:51259   â†’ 198.51.100.89:51259
     â””â”€ å¦‚æœæ´»è·ƒï¼ˆ< 15ç§’ï¼‰â†’ âœ… ä½¿ç”¨ STUNï¼ˆNAT ç©¿é€ï¼‰
     
  3. é™çº§ä¸­ç»§:    å®¢æˆ·ç«¯ A â”€â”€â†’ æœåŠ¡å™¨ â”€â”€â†’ å®¢æˆ·ç«¯ B
     â””â”€ å§‹ç»ˆå¯ç”¨ â†’ âœ… ä½¿ç”¨ä¸­ç»§ï¼ˆä¿è¯è¿é€šï¼‰

å¥åº·ç›‘æ§ï¼š
  - æ¯ 10 ç§’å‘é€ä¿æ´»æ¢æµ‹ï¼ˆIPv6 å’Œ STUN åŒè·¯ï¼‰
  - è¿æ¥è¶…æ—¶ï¼š15 ç§’
  - å¤±è´¥æ—¶è‡ªåŠ¨é‡æ–°é€‰æ‹©è·¯å¾„
```

#### ğŸ“‹ è¦æ±‚

**IPv6 ç›´è¿ï¼š**
- åŒæ–¹éƒ½æœ‰å…¨çƒ IPv6 åœ°å€
- UDP ç«¯å£ 51258 å¯è®¿é—®
- åŒæ–¹éƒ½ä½¿ç”¨ `--enable-p2p` æ ‡å¿—

**STUN æ‰“æ´ï¼š**
- IPv4 è¿æ¥
- UDP ç«¯å£ 51259 å¯è®¿é—®
- å…¼å®¹çš„ NAT ç±»å‹ï¼ˆå¤§å¤šæ•°è·¯ç”±å™¨æ”¯æŒï¼‰
- åŒæ–¹éƒ½ä½¿ç”¨ `--enable-p2p` æ ‡å¿—

**æ³¨æ„ï¼š** å¦‚æœ IPv6 å’Œ STUN éƒ½ä¸å¯ç”¨ï¼Œæµé‡ä¼šè‡ªåŠ¨é™çº§åˆ°ä¸­ç»§æ¨¡å¼ã€‚

#### ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

```bash
# åŸºç¡€ P2Pï¼ˆIPv6 + STUNï¼‰
./client -s SERVER:8080 -i client-001 --enable-p2p

# è‡ªå®šä¹‰åŠ å¯†
./client -s SERVER:8080 -i client-001 --enable-p2p -c chacha20:my-key

# æŸ¥çœ‹è¿æ¥çŠ¶æ€ï¼ˆäº¤äº’æ¨¡å¼ä¸‹æŒ‰ 's' é”®ï¼‰
# æ˜¾ç¤ºæ¯ä¸ªå¯¹ç­‰èŠ‚ç‚¹çš„ IPv6 å’Œ STUN è¿æ¥å¥åº·åº¦
```

#### ğŸ“Š è¿æ¥çŠ¶æ€è¾“å‡º

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        è¿æ¥çŠ¶æ€                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¡ ä¸­ç»§è¿æ¥ (TCP)
   â”œâ”€ æ¥æ”¶å¸§æ•°:  1234 (é”™è¯¯: 0)
   â””â”€ å‘é€å¸§æ•°:  5678 (é”™è¯¯: 1)

ğŸ”— P2P è¿æ¥ (UDP): 2 ä¸ªå¯¹ç­‰èŠ‚ç‚¹
   â”œâ”€ èŠ‚ç‚¹: client-002
   â”‚    â”œâ”€ IPv6:  âœ… æ´»è·ƒ (5ç§’å‰, [2001:db8::2]:51258)
   â”‚    â””â”€ STUN:  âœ… æ´»è·ƒ (8ç§’å‰, 203.0.113.45:60001)
   â””â”€ èŠ‚ç‚¹: client-003
        â”œâ”€ IPv6:  âš ï¸  æœªæ´»è·ƒ (20ç§’å‰, [2001:db8::3]:51258)
        â””â”€ STUN:  âœ… æ´»è·ƒ (3ç§’å‰, 198.51.100.89:60002)
```

#### ğŸ” æ•…éšœæ’é™¤

**IPv6 è¿æ¥ä¸å·¥ä½œï¼Ÿ**
- æ£€æŸ¥åŒæ–¹æ˜¯å¦æœ‰ IPv6ï¼š`curl -6 ifconfig.me`
- éªŒè¯é˜²ç«å¢™å…è®¸ UDP 51258

**STUN è¿æ¥ä¸å·¥ä½œï¼Ÿ**
- æ£€æŸ¥ NAT ç±»å‹ï¼šæŸäº›å¯¹ç§° NAT å¯èƒ½ä¸æ”¯æŒ
- éªŒè¯é˜²ç«å¢™å…è®¸ UDP 51259
- æ£€æŸ¥ STUN æœåŠ¡å™¨æ˜¯å¦å¯è¾¾

**ä¸¤è€…éƒ½å¤±è´¥ï¼Ÿ**
- ä¸­ç»§æ¨¡å¼ä¼šè‡ªåŠ¨æ¿€æ´»
- æ£€æŸ¥æœåŠ¡å™¨è¿æ¥
- éªŒè¯åŠ å¯†å¯†é’¥æ˜¯å¦åŒ¹é…

### ç¤ºä¾‹ï¼šå¤šç§Ÿæˆ·è®¾ç½®

#### åœºæ™¯ï¼šä¸¤ä¸ªåŠå…¬å®¤ï¼ˆåŒ—äº¬å’Œä¸Šæµ·ï¼‰

**åŒ—äº¬é›†ç¾¤ï¼š**
- åŠå…¬ç½‘å…³ï¼š`bj-office-gw` (10.0.1.1)
- å¼€å‘æœåŠ¡å™¨ï¼š`bj-dev-server` (10.0.1.2)

**ä¸Šæµ·é›†ç¾¤ï¼š**
- åŠå…¬ç½‘å…³ï¼š`sh-office-gw` (10.0.2.1)
- æ•°æ®åº“æœåŠ¡å™¨ï¼š`sh-db-server` (10.0.2.2)

**å¯åŠ¨æœåŠ¡ç«¯ï¼š**
```bash
./server etc/server.toml
```

**è¿æ¥åŒ—äº¬å®¢æˆ·ç«¯ï¼š**
```bash
# ç»ˆç«¯ 1ï¼šåŒ—äº¬åŠå…¬ç½‘å…³
./client -s 192.168.1.100:8080 -i bj-office-gw

# ç»ˆç«¯ 2ï¼šåŒ—äº¬å¼€å‘æœåŠ¡å™¨
./client -s 192.168.1.100:8080 -i bj-dev-server
```

**è¿æ¥ä¸Šæµ·å®¢æˆ·ç«¯ï¼š**
```bash
# ç»ˆç«¯ 3ï¼šä¸Šæµ·åŠå…¬ç½‘å…³
./client -s 192.168.1.100:8080 -i sh-office-gw

# ç»ˆç«¯ 4ï¼šä¸Šæµ·æ•°æ®åº“æœåŠ¡å™¨
./client -s 192.168.1.100:8080 -i sh-db-server
```

**æµ‹è¯•è¿é€šæ€§ï¼š**

```bash
# åŒ—äº¬å®¢æˆ·ç«¯å¯ä»¥é€šä¿¡
ping 10.0.1.2  # ä» bj-office-gw åˆ° bj-dev-server

# ä¸Šæµ·å®¢æˆ·ç«¯å¯ä»¥é€šä¿¡
ping 10.0.2.2  # ä» sh-office-gw åˆ° sh-db-server

# è·¨é›†ç¾¤é€šä¿¡è¢«éš”ç¦»
# åŒ—äº¬æ— æ³•è®¿é—®ä¸Šæµ·ï¼Œåä¹‹äº¦ç„¶
```

## ğŸ—ºï¸ è·¯çº¿å›¾

- [x] **IPv6 P2P æ”¯æŒ** - âœ… å·²å®Œæˆï¼ˆIPv6 ç›´è¿ï¼‰
- [x] **STUN æ‰“æ´** - âœ… å·²å®Œæˆï¼ˆIPv4 NAT ç©¿é€ï¼‰
- [x] **åŒè·¯å¾„ç½‘ç»œ** - âœ… å·²å®Œæˆï¼ˆIPv6 + STUN æ™ºèƒ½åˆ‡æ¢ï¼‰
- [x] **å®æ—¶è¿æ¥ç›‘æ§** - âœ… å·²å®Œæˆï¼ˆåˆ†è·¯å¾„å¥åº·çŠ¶æ€ï¼‰
- [ ] Windows æœåŠ¡æ”¯æŒ
- [ ] Linux systemd é›†æˆ
- [ ] åŸºäº Web çš„ç®¡ç†é¢æ¿
- [ ] æ— éœ€é‡å¯çš„åŠ¨æ€è·¯ç”±æ›´æ–°
- [ ] QUIC åè®®æ”¯æŒ
- [ ] ç§»åŠ¨å®¢æˆ·ç«¯ï¼ˆiOS/Androidï¼‰
- [ ] Docker å®¹å™¨é•œåƒ
- [ ] Kubernetes operator
- [ ] è‡ªåŠ¨æ›´æ–°æœºåˆ¶

## ğŸ™ è‡´è°¢

- ä½¿ç”¨ [Tokio](https://tokio.rs/) å¼‚æ­¥è¿è¡Œæ—¶æ„å»º
- åŠ å¯†ç”± [RustCrypto](https://github.com/RustCrypto) æä¾›
- TUN/TAP æ¥å£é€šè¿‡ [tun-rs](https://github.com/meh/rust-tun) å®ç°

## ğŸ“ è”ç³»æ–¹å¼

- é—®é¢˜åé¦ˆï¼š[GitHub Issues](https://github.com/smartethnet/rustun/issues)
- è®¨è®ºï¼š[GitHub Discussions](https://github.com/smartethnet/rustun/discussions)

---

**æ³¨æ„**ï¼šè¿™æ˜¯ä¸€ä¸ªå®éªŒæ€§é¡¹ç›®ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨éœ€è‡ªè¡Œæ‰¿æ‹…é£é™©ã€‚
